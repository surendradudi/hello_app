pipeline {
    agent any 
        //  environment {
        // //   ENV_NAME = "${env.JOB_NAME}"
        // //   ENV_NUMBER = "${env.BUILD_NUMBER}"
        // //   ENV_URL = "${env.BUILD_URL}"
        //  }
          parameters{               
            //  Choice On Picking The Branches 
             choice(name: 'ENV', choices: ['main'], description: 'Picking The Branch')         
           }
    
    stages {
        stage ('Deploy') {     // Deploying The Application Server
            // when {
            //     allOf {
            //         branch 'stage_v1'
            //         environment name: 'DEPLOY_TO', value: 'stage_v1'
            //     }
            // }
            steps {
            
                 sh  ''' 
                      ssh ubuntu@44.203.199.162 << 'EOF' 
                      echo $ENV
                      ./deploy_script.sh $ENV

                        
                           
                '''

        }
    }


    }
    //post {
        // For Slack Notification Success Build From Jenkins Pipeline
      // success {
        // script {
          // statusComment = "[${env.JOB_NAME}] <${env.BUILD_URL}|#${env.BUILD_NUMBER}> Core Project Of Build Was Successfully for ${env.GIT_BRANCH} :tada:"
           //slackSend color: 'good', message: statusComment
    //}
      // }
       // For Slack Notification Failed Build From Jenkins Pipeline
       //failure {
         //  script {
        //statusComment = "[${env.JOB_NAME}] <${env.BUILD_URL}|#${env.BUILD_NUMBER}> Core Project Of Build was Failed for ${env.GIT_BRANCH} :tada:"
        //slackSend color: 'danger', message: statusComment
    //}
      // }
    //    always {
    //    mail to: 'bcl@nclasters.org',
    //       subject: "Status of pipeline: ${currentBuild.fullDisplayName}",
    //       body: "${env.BUILD_URL} has result ${currentBuild.result}"
    // }
       
    
    //}
}
